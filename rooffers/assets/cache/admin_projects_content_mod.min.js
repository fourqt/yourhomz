
var geocoder;var map;var marker;var project_types=[1,2,3,4,5,6,7,8,9,10,11,12];function gmaps_init(){var latlng=new google.maps.LatLng(28.535516,77.391026);var options={zoom:10,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("gmaps-canvas"),options);geocoder=new google.maps.Geocoder();marker=new google.maps.Marker({map:map,draggable:true});google.maps.event.addListener(marker,'dragend',function(){geocode_lookup('latLng',marker.getPosition());});google.maps.event.addListener(map,'click',function(event){marker.setPosition(event.latLng)
geocode_lookup('latLng',event.latLng);});$('#gmaps-error').hide();}
function update_map(geometry){map.fitBounds(geometry.viewport)
marker.setPosition(geometry.location)}
function update_ui(address,latLng,rawData){$('#gmaps-input-address').autocomplete("close");$('#gmaps-input-address').val(address);$('#gmaps-output-latitude').val(latLng.lat());$('#gmaps-output-longitude').val(latLng.lng());$('#gmaps-output').val(JSON.stringify(rawData));}
function geocode_lookup(type,value,update){update=typeof update!=='undefined'?update:false;request={};request[type]=value;geocoder.geocode(request,function(results,status){$('#gmaps-error').html('');$('#gmaps-error').hide();if(status==google.maps.GeocoderStatus.OK){if(results[0]){update_ui(results[0].formatted_address,results[0].geometry.location,results[0])
if(update){update_map(results[0].geometry)}}else{$('#gmaps-error').html("Sorry, something went wrong. Try again!");$('#gmaps-error').show();}}else{if(type=='address'){$('#gmaps-error').html("Sorry! We couldn't find "+value+". Try a different search term, or click the map.");$('#gmaps-error').show();}else{$('#gmaps-error').html("No address.");$('#gmaps-error').show();update_ui('',value,'')}};});};function autocomplete_init(){$("#gmaps-input-address").autocomplete({source:function(request,response){geocoder.geocode({'address':request.term},function(results,status){response($.map(results,function(item){return{label:item.formatted_address,value:item.formatted_address,geocode:item}}));})},select:function(event,ui){update_ui(ui.item.value,ui.item.geocode.geometry.location)
update_map(ui.item.geocode.geometry)}});$("#gmaps-input-address").bind('keydown',function(event){if(event.keyCode==13){geocode_lookup('address',$('#gmaps-input-address').val(),true);$('#gmaps-input-address').autocomplete("disable")}else{$('#gmaps-input-address').autocomplete("enable")}});};function update_map_city_select(){$('#sel_city_select').change(function(){var selectedCity=$(this).find('option:selected');var latLng=new google.maps.LatLng(selectedCity.attr('data-latitude'),selectedCity.attr('data-longitude'));map.panTo(latLng);});}
function toggle_property_form(){$('#project_type_0').change(function(){if($('#project_type_0').val()>0){$('#rootwizard').bootstrapWizard('display',$(this).attr('data-id'));}else{$('#rootwizard').bootstrapWizard('display',$(this).attr('data-id'));}});$("input.property_type").click(function(){if(this.checked){$('#rootwizard').bootstrapWizard('display',$(this).attr('data-id'));}else{$('#rootwizard').bootstrapWizard('hide',$(this).attr('data-id'));}});}
function populate_apartment_form(tab,navigation,index){if(index==project_types[0]){var apt_unit_type=[];var cls='active';$('#apt_unit_type :selected').each(function(i,selected){if(i!=0)cls='';$('#tabsleft ul').append('<li class="'+cls+'"><a data-toggle="tab" href="#tabsleft-tab'+i+'">'+$(this).text()+'</a></li>');$('#tabsleft div.tab-content').append('<div id="tabsleft-tab'+i+'" class="tab-pane '+cls+' fade in">'+$('div.apt_unit_frm').html()+'</div>');apt_unit_type[i]=$(selected).text();});$('.date-picker').datepicker({orientation:"top auto",autoclose:true});$('.dynCheckbox').uniform();$("div.dropZoneDyn").dropzone({url:"/file/post"});}}
$(document).ready(function(){if($('#sel_city_select').length){$('#sel_city_select').select2();}
$(".js-example-tokenizer").select2({tags:true,tokenSeparators:[',',' ']});if($('#gmaps-canvas').length){};var $validator=$("#wizardForm").validate({rules:{exampleInputName:{required:true},exampleInputName2:{required:true},exampleInputEmail:{required:true,email:true},exampleInputProductName:{required:true},exampleInputProductId:{required:true},exampleInputQuantity:{required:true},exampleInputCard:{required:true,number:true},exampleInputSecurity:{required:true,number:true},exampleInputHolder:{required:true},exampleInputExpiration:{required:true,date:true},exampleInputCsv:{required:true,number:true}}});$('#rootwizard').bootstrapWizard({'tabClass':'nav nav-tabs',onTabShow:function(tab,navigation,index){var $total=navigation.find('li').length;var $current=index+1;var $percent=($current/$total)*100;$('#rootwizard').find('.progress-bar').css({width:$percent+'%'});},'onNext':function(tab,navigation,index){var $valid=true;if(!$valid){$validator.focusInvalid();return false;}
populate_apartment_form(tab,navigation,index);},'onTabClick':function(tab,navigation,index){var $valid=true;if(!$valid){$validator.focusInvalid();return false;}},});for(i=1;i<12;i++){$('#rootwizard').bootstrapWizard('hide',i);}
$('.date-picker').datepicker({orientation:"top auto",autoclose:true});update_map_city_select();toggle_property_form();});