
var geocoder;var map;var marker;function gmaps_init(){var latlng=new google.maps.LatLng(51.751724,-1.255284);var options={zoom:2,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("gmaps-canvas"),options);geocoder=new google.maps.Geocoder();marker=new google.maps.Marker({map:map,draggable:true});google.maps.event.addListener(marker,'dragend',function(){geocode_lookup('latLng',marker.getPosition());});google.maps.event.addListener(map,'click',function(event){marker.setPosition(event.latLng)
geocode_lookup('latLng',event.latLng);});$('#gmaps-error').hide();}
function update_map(geometry){map.fitBounds(geometry.viewport)
marker.setPosition(geometry.location)}
function update_ui(address,latLng){$('#gmaps-input-address').autocomplete("close");$('#gmaps-input-address').val(address);}
function geocode_lookup(type,value,update){update=typeof update!=='undefined'?update:false;request={};request[type]=value;geocoder.geocode(request,function(results,status){$('#gmaps-error').html('');$('#gmaps-error').hide();if(status==google.maps.GeocoderStatus.OK){if(results[0]){update_ui(results[0].formatted_address,results[0].geometry.location)
if(update){update_map(results[0].geometry)}}else{$('#gmaps-error').html("Sorry, something went wrong. Try again!");$('#gmaps-error').show();}}else{if(type=='address'){$('#gmaps-error').html("Sorry! We couldn't find "+value+". Try a different search term, or click the map.");$('#gmaps-error').show();}else{$('#gmaps-error').html("Woah... that's pretty remote! You're going to have to manually enter a place name.");$('#gmaps-error').show();update_ui('',value)}};});};function autocomplete_init(){$("#gmaps-input-address").autocomplete({source:function(request,response){geocoder.geocode({'address':request.term},function(results,status){response($.map(results,function(item){return{label:item.formatted_address,value:item.formatted_address,geocode:item}}));})},select:function(event,ui){update_ui(ui.item.value,ui.item.geocode.geometry.location)
update_map(ui.item.geocode.geometry)}});$("#gmaps-input-address").bind('keydown',function(event){if(event.keyCode==13){geocode_lookup('address',$('#gmaps-input-address').val(),true);$('#gmaps-input-address').autocomplete("disable")}else{$('#gmaps-input-address').autocomplete("enable")}});};$(document).ready(function(){if($('#sel_city_select').length){$('#sel_city_select').select2();}
if($('#gmaps-canvas').length){gmaps_init();autocomplete_init();};var $validator=$("#wizardForm").validate({rules:{exampleInputName:{required:true},exampleInputName2:{required:true},exampleInputEmail:{required:true,email:true},exampleInputPassword1:{required:true},exampleInputPassword2:{required:true,equalTo:'#exampleInputPassword1'},exampleInputProductName:{required:true},exampleInputProductId:{required:true},exampleInputQuantity:{required:true},exampleInputCard:{required:true,number:true},exampleInputSecurity:{required:true,number:true},exampleInputHolder:{required:true},exampleInputExpiration:{required:true,date:true},exampleInputCsv:{required:true,number:true}}});$('#rootwizard').bootstrapWizard({'tabClass':'nav nav-tabs',onTabShow:function(tab,navigation,index){var $total=navigation.find('li').length;var $current=index+1;var $percent=($current/$total)*100;$('#rootwizard').find('.progress-bar').css({width:$percent+'%'});},'onNext':function(tab,navigation,index){var $valid=$("#wizardForm").valid();if(!$valid){$validator.focusInvalid();return false;}},'onTabClick':function(tab,navigation,index){var $valid=$("#wizardForm").valid();if(!$valid){$validator.focusInvalid();return false;}},});$('.date-picker').datepicker({orientation:"top auto",autoclose:true});});